type: origins:multiple
badges:
- sil_yoni:hold_on_active
key0:
   type: origins:active_self
   key:
      key: key.origins.secondary_active
   entity_action:
      type: origins:nothing


# 300sec or 5min (max, usually set to 20sec or 400tick (-5600))
# change_resource 用于cooldown时，修改的是已经经过的时间，而不是剩余时间
cooldown_of_switch:
   type: origins:cooldown
   cooldown: 6000
   hud_render:
      should_render: true
      bar_index: 1
      inverted: false

trigger_on_active:
   type: origins:action_over_time
   interval: 1
   condition:
      type: origins:resource
      resource: sil_yoni:detection/active_actions/secondary_active_result
      comparison: '=='
      compare_to: -3
   entity_action:
      type: origins:if_else
      condition:
         type: origins:resource
         resource: "*:*_cooldown_of_switch"
         comparison: '>'
         compare_to: 0
      if_action:
         type: origins:execute_command
         command: 'tellraw @s {"translate": "power.sil_yoni.void_space.cooldown_deny_switch"}'
      else_action:
         type: origins:change_resource
         resource: "*:*_call_switch"
         operation: set
         change: 0

call_switch:
   type: origins:resource
   start_value: 0
   min: 0
   max: 1
   max_action:
      type: origins:and
      actions:
      -
         type: origins:change_resource
         resource: "*:*_call_switch"
         operation: set
         change: 0
      -
         type: origins:change_resource
         resource: "*:*_cooldown_of_switch"
         operation: set
         change: 5600
      -
         type: origins:if_else
         condition:
            type: origins:resource
            resource: "*:the_void/void_ability_enabled"
            comparison: "=="
            compare_to: 0
         if_action:
            type: origins:change_resource
            resource: "*:the_void/void_ability_call_switch"
            operation: set
            change: 1
         else_action:
            type: origins:change_resource
            resource: "*:the_void/void_ability_call_switch"
            operation: set
            change: -1
      -
         type: origins:modify_resource
         resource: "*:the_void/void_inventory_in_void_only_enabled"
         modifier:
            value: 0
            resource: "*:the_void/void_ability_enabled"
            operation: set_total

trigger_power_change:
   type: origins:action_on_callback
   execute_chosen_when_orb: true
   entity_action_gained:
      type: origins:and
      actions:
      -
         type: origins:grant_power
         power: sil_yoni:detection/active_actions/secondary_active
         source: sil_yoni:void_space
      -
         type: origins:grant_power
         power: "*:the_void/void_inventory_in_void_only_enabled"
         source: sil_yoni:void_space
      -
         type: origins:grant_power
         power: "*:the_void/void_ability"
         source: sil_yoni:void_space
   entity_action_lost:
      type: origins:and
      actions:
      -
         type: origins:revoke_power
         power: sil_yoni:detection/active_actions/secondary_active
         source: sil_yoni:void_space
      -
         type: origins:revoke_power
         power: "*:the_void/void_ability"
         source: sil_yoni:void_space

trigger_on_death_in_void:
   type: origins:prevent_death
   condition:
      type: origins:and
      conditions:
      -
         type: origins:resource
         resource: "*:the_void/void_ability_can_leave"
         comparison: '=='
         compare_to: 1
      -
         type: origins:resource
         resource: "*:the_void/void_ability_enabled"
         comparison: '=='
         compare_to: 1
   entity_action:
      type: origins:and
      actions:
      - type: origins:clear_effect
      - type: origins:extinguish
      -
         type: origins:change_resource
         resource: "*:*_call_switch"
         operation: set
         change: -1
      -
         type: origins:trigger_cooldown
         power: "*:*_cooldown_of_switch"
      -
         type: origins:execute_command
         command: 'tellraw @s {"translate": "power.sil_yoni.void_space.live_keep"}'
